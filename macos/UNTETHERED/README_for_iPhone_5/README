ch3rryflower - v1.3b4 by @dora2_yuruyi
iPhone3,1/iPhone5,2 only

**Requires iOS 7.x SHSH (iPhone5,2)**

#How to use (i5)

0) change directory to ch3rryflower (ver, X.X) via terminal
*Launch terminal and change directory to ch3rryflower_vX.X/macos ("cd" command).
cd ch3rryflower_vX.X/macos

1) make iBoot
Create a patched iBoot.
[USE_SCRIPT]
./make_iBoot.sh <ipsw> -iv [iv] -k [key]

ex:(for iOS 7.1.2)
./make_iBoot.sh iPhone5,2_7.1.2_11D257_Restore.ipsw -iv 422b9c5e642ff797dc38b9910f084826 -k b23dbe781086f6000cba372e5e8ae01c3f61c032ab1fb6729129707e3ccb9463

2) make CFW
./cherry <ipsw> custom.ipsw -bbupdate -memory -derebusantiquis <base-ipsw> iBoot
base-ipsw is required for iBoot exploits. Select the version with SHSH and the presence of De Rebus Antiquis. (Currently iOS 7.1.2 FW only)

3) restore
Replace the target iOS 7 SHSH with the version you want to restore.

mv -v shsh/{ecid}-{device}-7.x.x-11Xxxx.shsh shsh/{ecid}-{device}-{target_var}-{build}.shsh

** enter pwned DFU
--- command start ---
./pwnedDFU -p

unzip -j custom.ipsw Firmware/dfu/iBSS*
bin/xpwntool iBSS* softdfu

./pwnedDFU -f softdfu

rm softdfu
rm iBSS*

./idevicererestore -r custom.ipsw
--- command end ---

ver. 1.3 [3]
Update: 2019-12-21 01:22 (JST)


advanced *) makeiBoot([!USE_SCRIPT])

mkdir iboottmp/
cd iboottmp/
unzip -j ../$1 Firmware/all_flash/all_flash.$device.production/iBoot*
mv -v iBoot* tmp
../bin/xpwntool tmp ibot.dec -iv [iv] -k [key]
../bin/iBoot32Patcher ibot.dec ibot.pwned <flags>
../bin/xpwntool ibot.pwned iBoot -t tmp
echo "0000010: 6365" | xxd -r - iBoot
echo "0000020: 6365" | xxd -r - iBoot
mv -v iBoot ..
cd ..
rm -r iboottmp

{must flags: --boot-partition, --boot-ramdisk}
